<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>VLink Mobile</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
    <div id="app-wrapper">
        <nav class="sidebar">
            <button id="add-friend-btn" title="Add Contact">+</button>
            <div id="friends-list">
                </div>
            <button id="delete-friend-btn" class="delete-btn" title="Remove Contact">×</button>
        </nav>

        <main id="chat-app">
            <header class="chat-header">
                <div class="header-main">
                    <h2 id="chat-target">VLink Secure</h2>
                    <span id="status" style="font-size: 10px; color: var(--accent-green);">● Secure</span>
                </div>
                <div style="display: flex; gap: 8px;">
                    <input type="password" id="secret-key" placeholder="Key" style="width: 60px; background: #1e1f22; border: 1px solid #444; color: white; border-radius: 4px; padding: 2px 5px; font-size: 12px;">
                    <button id="show-qr-btn" style="background:none; border:none; color:white; font-size: 12px;">QR</button>
                </div>
            </header>

            <div id="qrcode" class="hidden" style="position:absolute; top: 60px; right: 20px; background:white; padding:10px; border-radius:8px; z-index:100;"></div>

            <div id="chat-thread">
                <div class="message system">Tap + to add a friend. Enter a Passcode to encrypt messages.</div>
            </div>

            <div id="packet-counter" class="hidden" style="position: absolute; bottom: 130px; left: 50%; transform: translateX(-50%); background: var(--accent-blue); padding: 5px 15px; border-radius: 20px; font-size: 12px; z-index: 50;">0/0</div>

            <footer>
                <div class="chat-input-area">
                    <label for="file-input" style="cursor:pointer; color:var(--text-muted);">
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                    </label>
                    <input type="file" id="file-input" style="display:none;" accept="image/*">
                    
                    <textarea id="import-input" placeholder="Message..."></textarea>
                    
                    <button id="chunk-btn" class="send-btn">
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                    </button>
                </div>
                <div class="util-bar">
                    <button id="clear-chat-btn">Clear Thread</button>
                    <button id="reset-receiver" style="color:var(--accent-red);">Wipe App</button>
                </div>
            </footer>
        </main>
    </div>

    <div id="image-viewer" class="modal">
        <span class="close-viewer">&times;</span>
        <div class="modal-content-wrapper"><img class="modal-content" id="full-image"></div>
        <div class="viewer-controls">
            <button onclick="adjustZoom(0.2)">+</button>
            <button onclick="adjustZoom(-0.2)">-</button>
            <button id="download-btn">Save</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>