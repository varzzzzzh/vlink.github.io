/* ==========================================
   6. MOBILE RESPONSIVENESS (Media Queries)
   ========================================== */
@media (max-width: 768px) {
    /* Stack layout for small screens */
    #app-wrapper {
        flex-direction: row;
    }

    /* Shrink sidebar so it doesn't take too much space */
    .sidebar {
        width: 60px;
        padding: 10px 0;
    }

    .server-icon {
        width: 40px;
        height: 40px;
        font-size: 12px;
    }

    /* Adjust Chat Header for small screens */
    .chat-header {
        padding: 0 10px;
    }

    .header-main h2 {
        font-size: 14px;
        max-width: 120px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    #secret-key {
        width: 80px; /* Smaller passcode box on mobile */
        font-size: 11px;
    }

    /* Make message bubbles wider on mobile */
    .message {
        max-width: 85%;
        font-size: 15px; /* Slightly larger text for mobile readability */
        padding: 12px 16px;
    }

    /* Fixed Input Area for Mobile Keyboard */
    .chat-input-area {
        padding: 10px;
        background: var(--bg-chat);
        position: sticky;
        bottom: 0;
    }

    #import-input {
        font-size: 16px; /* Prevents iOS from auto-zooming on focus */
        height: 40px;
    }

    /* Modal Adjustments for Vertical Screens */
    .modal-content {
        max-width: 95%;
        width: auto;
    }

    .viewer-controls {
        flex-wrap: wrap; /* Buttons wrap on small screens */
        padding: 15px 10px;
        gap: 8px;
    }

    .viewer-controls button {
        flex: 1; /* Buttons fill the width */
        font-size: 12px;
        padding: 12px 5px;
    }

    /* Utility Bar (Clear History) */
    .util-bar {
        padding: 5px;
    }
    
    #reset-receiver {
        width: 100%;
        border-radius: 0;
        font-size: 11px;
        background: #da373c; /* Red color for destructive action */
    }
}

/* Landscape Mode Tweak */
@media (max-height: 500px) {
    .sidebar { display: none; } /* Hide sidebar in landscape to save height */
    .chat-header { height: 40px; }
}